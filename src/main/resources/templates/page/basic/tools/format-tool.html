<style>
    .layui-form-item .layui-input-company {width: auto;padding-right: 10px;line-height: 38px;}
</style>
<div class="layuimini-main">
    <div class="layui-form layuimini-form" lay-filter="formData">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>输入</legend>
        </fieldset>
        <div class="layui-form-item">
            <div class="layui-form-item layui-form-text">
                <div class="layui-input-block">
                    <textarea name="inputText" class="layui-textarea" rows="20" placeholder="请输入要处理的字符"></textarea>
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <div class="layui-input-block">
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="jsonBtn">格式化Json</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="base64EncrypBtn">Base64加密</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="base64DecryptBtn">Base64解密</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="md5EncrypBtn">MD5加密</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="md5DecryptBtn">MD5解密</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="uuidGenerate">生成UUID</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="urlEncoder">URL编码</button>
                    <button lay-submit class="layui-btn layui-btn-normal" lay-filter="urlDecoder">URL解码</button>
                </div>
            </div>
        </div>

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>输出</legend>
        </fieldset>
        <div class="layui-form-item">
            <div class="layui-form-item layui-form-text">
                <div class="layui-input-block">
                    <textarea name="outputText" class="layui-textarea" rows="20" placeholder="" readonly></textarea>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="lib/jquery-3.4.1/jquery-3.4.1.min.js"></script>
<script src="js/config.js"></script>
<script>
    layui.use(['form'], function () {
        var form = layui.form,
            layer = layui.layer;

        /**
         * 初始化表单，要加上，不然刷新部分组件可能会不加载
         */
        form.render();

        //Json格式化
        form.on('submit(jsonBtn)', function (data) {
            var { inputText, outputText } = data.field;
            if(!inputText){
                layer.msg('请输入要处理的字符');
                return false;
            }
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/json',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        // 字符串转Json(仅前端就可以做到) JSON.stringify(JSON.parse(inputText), null, 2)
                        "outputText": errorMsg ? errorMsg : JSON.stringify(JSON.parse(inputText), null, 2),
                    });
                }
            });
            return false;
        });

        //Base64加密
        form.on('submit(base64EncrypBtn)', function (data) {
            var { inputText, outputText } = data.field;
            if(!inputText){
                layer.msg('请输入要处理的字符');
                return false;
            }
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/base64-encoder',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });

        //Base64解密
        form.on('submit(base64DecryptBtn)', function (data) {
            var { inputText, outputText } = data.field;
            if(!inputText){
                layer.msg('请输入要处理的字符');
                return false;
            }
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/base64-decrypt',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });

        //MD5加密
        form.on('submit(md5EncrypBtn)', function (data) {
            var { inputText, outputText } = data.field;
            if(!inputText){
                layer.msg('请输入要处理的字符');
                return false;
            }
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/md5-encoder',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });

        //MD5解密
        form.on('submit(md5DecryptBtn)', function (data) {
            var { inputText, outputText } = data.field;
            if(!inputText){
                layer.msg('请输入要处理的字符');
                return false;
            }
            if(true){
                layer.msg('敬请期待');
                return false;
            }
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/md5-decrypt',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });

        //UUID生成
        form.on('submit(uuidGenerate)', function (data) {
            var { inputText, outputText } = data.field;
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/uuid-generate',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });

        // URL编码
        form.on('submit(urlEncoder)', function (data) {
            var { inputText, outputText } = data.field;
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/url-encoder',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });

        // URL解码
        form.on('submit(urlDecoder)', function (data) {
            var { inputText, outputText } = data.field;
            let requestBody = { inputText };
            $.ajax({
                type: 'post',
                url: basicPath + '/format-tool/url-decoder',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(requestBody),
                cache: false,
                async: false,
                success: function (data) {
                    let { inputText, outputText, errorMsg } = data;
                    form.val('formData', {
                        "outputText": errorMsg ? errorMsg : outputText,
                    });
                }
            });
            return false;
        });
    });
</script>